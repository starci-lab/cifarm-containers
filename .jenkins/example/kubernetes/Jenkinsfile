pipeline {
    agent none
    stages {
        stage('Run Hello World in Kubernetes Pod') {
            agent {
                kubernetes {
                    label 'helloworld-pod'  // This is a unique label for the pod
                    yaml """
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: helloworld
spec:
  containers:
  - name: shell
    image: alpine
    command:
    - cat
    tty: true
"""
                }
            }
            steps {
                container('shell') {
                    script {
                        // This is where we run the 'echo' command inside the pod
                        sh 'echo hello world'
                    }
                }
            }
        }
    }
}